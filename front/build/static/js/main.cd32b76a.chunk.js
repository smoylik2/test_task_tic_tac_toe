(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{18:function(e,t,n){e.exports={block:"playerinfo_block__1RWS7",playerName:"playerinfo_playerName__2bBto",active:"playerinfo_active__1d9qR",team:"playerinfo_team__x380p",score:"playerinfo_score__1wAyq",forRight:"playerinfo_forRight__1SO5g",forLeft:"playerinfo_forLeft__2S84S"}},20:function(e,t,n){e.exports={block:"navigation_block__35CLs",btnLikeLink:"navigation_btnLikeLink__QGS-G"}},24:function(e,t,n){e.exports={jacket:"simplemodal_jacket__3E0La",block:"simplemodal_block__1TRpl",message:"simplemodal_message__WyTaH",submitBtn:"simplemodal_submitBtn__CPY3b"}},29:function(e,t,n){e.exports={block:"gamehistory_block__4vSue",title:"gamehistory_title__FXR7h",list:"gamehistory_list__ZuNX3"}},30:function(e,t,n){e.exports={block:"scorehistory_block__13pd-",title:"scorehistory_title___VdSC",list:"scorehistory_list__2D3VU"}},34:function(e,t,n){e.exports={block:"warnmessage_block__3QNZE",message:"warnmessage_message__1ZmSB"}},35:function(e,t,n){e.exports={block:"gamefield_block__3lkhH",cell:"gamefield_cell__2ettv"}},49:function(e,t,n){e.exports={App:"app_App__2cZLa"}},53:function(e,t,n){e.exports={block:"gametitle_block__1vGp5"}},54:function(e,t,n){e.exports={block:"historyline_block__1I0l8"}},90:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(25),a=n.n(r),s=n(19),i=n(8),o=n(49),u=n.n(o),l=n(9),b=n(50),j=n(53),m=n.n(j),f=n(18),d=n.n(f),O=n(2),p=function(e){var t=e.name,n=e.team,c=e.score,r=e.active,a=e.position;return Object(O.jsxs)("div",{className:d.a.block,children:[Object(O.jsx)("h2",{className:"".concat(d.a.playerName," ").concat(r&&d.a.active),children:t}),Object(O.jsx)("span",{className:"".concat(d.a.team," ").concat("right"===a?d.a.forRight:null),children:"| ".concat(n," |")}),Object(O.jsx)("span",{className:"".concat(d.a.score," ").concat("left"===a?d.a.forLeft:null),children:c})]})},x=n(28),h=n(34),_=n.n(h),g=function(e){var t=e.message,n=Object(i.c)((function(e){return e.game.message})),r=Object(c.useState)(!0),a=Object(x.a)(r,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){setTimeout((function(){return o(!1)}),2e3)}),[s]),Object(c.useEffect)((function(){o(!0)}),[n]),Object(O.jsx)(O.Fragment,{children:s?Object(O.jsx)("div",{className:_.a.block,children:Object(O.jsx)("h2",{className:_.a.message,children:t})}):null})},v=function(e){var t=e.messageLine,n=Object(i.c)((function(e){return e.game.message})),c=Object(i.c)((function(e){return e.score})),r=Object(i.c)((function(e){return e.game.result}));return Object(O.jsxs)("div",{className:m.a.block,children:[Object(O.jsx)(p,{name:"Bot",score:c.ai,team:r.ai,active:!1,position:"left"}),Object(O.jsx)(p,{name:"Player",score:c.player,team:r.player,active:!0,position:"right"}),t?Object(O.jsx)(g,{message:n}):null]})},k=n(35),y=n.n(k),w="root/SET_SERVER_DATA",N="game/UPDATE_GAME_RESULT",S="game/RESET_GAME_FIELD",E="game/ERROR_MESSAGE",L="game/SET_MOVE_ACT",A="game/NEXT_GAME",T="game/START_GAME_AGAIN",R="score/NEW_GAME",F="score/START_NEW_GAME",G=function(e){return{type:S,newField:e}},B=function(e){return{type:E,message:e}},M=function(e){return{type:R,newScore:e}},C=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.game.result.board})),n=Object(c.useState)(!0),r=Object(x.a)(n,2),a=r[0],s=r[1];Object(c.useEffect)((function(){s(!1)}),[t]);var o=function(t){return e(function(e){return{type:L,index:e}}(t))},u=null===t||void 0===t?void 0:t.flat().map((function(e,t){var n,c;return n="number"!==typeof e?e:"",c=t+1,Object(O.jsx)("div",{className:y.a.cell,"data-index":c,children:n},c)}));return Object(O.jsx)("div",{className:y.a.block,onClick:function(e){a||e.target.innerHTML||(s(!0),o(e.target.dataset.index))},children:u})},P=n(29),H=n.n(P),X=n(54),D=n.n(X),I=function(e){var t=e.name,n=e.team,c=e.lastStep;return Object(O.jsx)("li",{children:Object(O.jsxs)("div",{className:D.a.block,children:[Object(O.jsx)("span",{children:"".concat(t," ( ").concat(n," )")}),Object(O.jsx)("span",{children:c})]})})},U=function(){var e=Object(i.c)((function(e){return e.game.history})),t=[];return e.length&&(t=e.map((function(e){return Object(O.jsx)(I,{name:e.name,team:e.team,lastStep:e.move},e.team+e.move)}))),Object(O.jsxs)("div",{className:H.a.block,children:[Object(O.jsx)("h3",{className:H.a.title,children:"History:"}),Object(O.jsx)("ol",{className:H.a.list,children:t||null})]})},V=n(24),W=n.n(V),Z=function(e){var t=e.message,n=e.submitAction;return Object(O.jsx)("div",{className:W.a.jacket,children:Object(O.jsxs)("div",{className:W.a.block,children:[Object(O.jsx)("p",{className:W.a.message,children:t}),Object(O.jsx)("button",{onClick:n,className:W.a.submitBtn,type:"button",children:"OK"})]})})},q=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.game.result.end})),n=Object(i.c)((function(e){return e.game.message}));return Object(O.jsxs)(O.Fragment,{children:[t?Object(O.jsx)(Z,{message:n,submitAction:function(){return e({type:A})}}):null,Object(O.jsx)(v,{messageLine:!0}),Object(O.jsx)(C,{}),Object(O.jsx)(U,{})]})},J=n(30),Q=n.n(J);function K(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var Y=function(){var e=Object(i.c)((function(e){return e.score.list})),t=[];return e.length&&(t=e.map((function(e){return Object(O.jsx)(I,{name:e.winner||"Nobody",team:e.team||"-",lastStep:K(e.ts)},e.ts)}))),Object(O.jsxs)("div",{className:Q.a.block,children:[Object(O.jsx)("h3",{className:Q.a.title,children:"History:"}),Object(O.jsx)("ol",{className:Q.a.list,children:t||null})]})},z=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{messageLine:!1}),Object(O.jsx)(Y,{})]})},$=n(20),ee=n.n($),te=function(){var e=Object(i.b)(),t=Object(l.f)();return Object(O.jsx)("div",{className:ee.a.block,children:"/score"!==t.pathname?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{type:"button",className:ee.a.btnLikeLink,onClick:function(){return e({type:T})},children:"Restart game"}),Object(O.jsx)(s.b,{to:"/score",className:ee.a.btnLikeLink,children:"Score"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{type:"button",className:ee.a.btnLikeLink,onClick:function(){return e({type:F})},children:"New game"}),Object(O.jsx)(s.b,{to:"/",className:ee.a.btnLikeLink,children:"Game"})]})})};var ne=function(){var e=Object(i.b)();return Object(c.useEffect)((function(){e({type:w})}),[]),Object(O.jsxs)("div",{className:u.a.App,children:[Object(O.jsx)(b.a,{children:Object(O.jsx)("title",{children:"Tic-Tac-Toe"})}),Object(O.jsxs)(l.a,{path:"*",children:[Object(O.jsx)(te,{}),Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/score",component:z,exact:!0}),Object(O.jsx)(l.a,{path:"/",component:q})]})]})]})},ce=n(17),re=n(56),ae=n(14),se=n.n(ae),ie=n(7),oe=n(55).create({withCredentials:!0,baseURL:"".concat("http://localhost:3000","/api"),headers:{"Content-type":"application/json"}}),ue=function(){return oe.get("score").then((function(e){return e.data}))},le=function(){return oe.post("score/reset").then((function(e){return e.data}))},be=function(){return oe.get("game").then((function(e){return e.data}))},je=function(e){return oe.post("game/move",'{"index":'.concat(e,"}")).then((function(e){return e.data}))},me=function(){return oe.post("game/reset").then((function(e){return e.data}))},fe=function(){return oe.get("game/next").then((function(e){return e.data}))},de=se.a.mark(ge),Oe=se.a.mark(ve),pe=se.a.mark(ke),xe=se.a.mark(ye),he=se.a.mark(we),_e=se.a.mark(Ne);function ge(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.a)([Object(ie.d)(L,ke),Object(ie.d)(A,ye),Object(ie.d)(T,we),Object(ie.d)(F,Ne),Object(ie.d)(w,ve)]);case 2:case"end":return e.stop()}}),de)}function ve(){var e,t;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ie.b)(be);case 3:return e=n.sent,n.next=6,Object(ie.b)(ue);case 6:return t=n.sent,n.next=9,Object(ie.c)(G(e));case 9:return n.next=11,Object(ie.c)(M(t));case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(ie.c)(B("Something wrong!"));case 17:case"end":return n.stop()}}),Oe,null,[[0,13]])}function ke(e){var t,n;return se.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.index,c.prev=1,t){c.next=4;break}return c.abrupt("return");case 4:return c.next=6,Object(ie.b)(je,t);case 6:return n=c.sent,c.next=9,Object(ie.c)({type:N,newField:n});case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(ie.c)(B("Something wrong!"));case 15:case"end":return c.stop()}}),pe,null,[[1,11]])}function ye(){var e,t;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ie.b)(fe);case 3:return e=n.sent,n.next=6,Object(ie.b)(ue);case 6:return t=n.sent,n.next=9,Object(ie.c)(G(e));case 9:return n.next=11,Object(ie.c)(M(t));case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(ie.c)(B("Something wrong!"));case 17:case"end":return n.stop()}}),xe,null,[[0,13]])}function we(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ie.b)(me);case 3:return e=t.sent,t.next=6,Object(ie.c)(G(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ie.c)(B("Something wrong!"));case 12:case"end":return t.stop()}}),he,null,[[0,8]])}function Ne(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ie.b)(le);case 3:return e=t.sent,t.next=6,Object(ie.c)(M(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ie.c)(B("Something wrong!"));case 12:case"end":return t.stop()}}),_e,null,[[0,8]])}var Se=n(16),Ee={result:{player:"X",ai:"O",board:[[1,2,3],[4,5,6],[7,8,9]],nextMove:"X"},history:[],message:"Game has been started!"},Le={ai:0,player:0,X:0,O:0,list:[]},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(Se.a)(Object(Se.a)({},e),t.newScore.result);default:return e}},Te=n(38),Re=function(e){return e?"".concat("ai"===e?"Bot":"Player"," is win!"):"Nobody won!"},Fe=function(e,t){var n=e.board.flat(),c=t.board.flat().reduce((function(e,c,r){return c!==n[r]?e.concat([{name:t.player===c?"Player":"Bot",team:c,move:r+1}]):e}),[]),r=n.filter((function(e){return"number"!==typeof e})).length%2?[c.find((function(e){return"Player"===e.name})),c.find((function(e){return"Bot"===e.name}))]:[c.find((function(e){return"Bot"===e.name})),c.find((function(e){return"Player"===e.name}))];return r=r.filter((function(e){return"undefined"!==typeof e}))},Ge=function(e,t){var n=e.flat().findIndex((function(e){return"string"===typeof e}));return n>=0?[{name:"Bot",team:t,move:n+1}]:[]},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(Se.a)(Object(Se.a)({},e),{},{message:t.message});case N:var n=t.newField.result.end?Re(t.newField.result.winner):e.message;return Object(Se.a)(Object(Se.a)({},e),{},{history:[].concat(Object(Te.a)(e.history),Object(Te.a)(Fe(e.result,t.newField.result))),result:Object(Se.a)({},t.newField.result),message:n});case S:return Object(Se.a)(Object(Se.a)({},e),{},{history:Ge(t.newField.result.board,t.newField.result.ai),result:Object(Se.a)({},t.newField.result),message:"Start a next game!"});default:return e}},Me=Object(re.a)(),Ce=Object(ce.c)({score:Ae,game:Be}),Pe=Object(ce.e)(Ce,Object(ce.a)(Me));Me.run(ge);var He=Pe;a.a.render(Object(O.jsx)(s.a,{children:Object(O.jsx)(i.a,{store:He,children:Object(O.jsx)(ne,{})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.cd32b76a.chunk.js.map